---
meta:
  title: Deploying Scaleway Serverless Functions with Serverless Framework
  description: This tutorial offers a detailed, step-by-step guide to get started with deploying Scaleway Serverless Functions with Serverless Framework
content:
  h1: Deploying Scaleway Serverless Functions with Serverless Framework
  paragraph: This tutorial offers a detailed, step-by-step guide to get started with deploying Scaleway Serverless Functions with Serverless Framework
tags: serverless framework functions faas deploy lambda
categories:
  - serverless
  - functions
dates:
  validation: 2024-05-02
  posted: 2024-05-02
---

The [Serverless Framework](https://www.serverless.com/framework) is an open-source framework designed to simplify the deployment and management of serverless applications. Serverless computing allows developers to build and run applications and services without worrying about the underlying infrastructure.

The [Scaleway plugin for Serverless Framework](https://github.com/scaleway/serverless-scaleway-functions) allows you to seamlessly deploy your functions to the Scaleway infrastructure using the framework with minimum configuration.

<Macro id="requirements" />

- A Scaleway account logged into the [console](https://console.scaleway.com)
- [Owner](/identity-and-access-management/iam/concepts/#owner) status or [IAM permissions](/identity-and-access-management/iam/concepts/#permission) allowing you to perform actions in the intended Organization
- A valid [API key](/identity-and-access-management/iam/how-to/create-api-keys/)
- Installed [Node.js](https://nodejs.org/en/download/package-manager/)
- Installed the [Serverless Framework](https://www.serverless.com/framework/docs/getting-started)
- Installed the [Scaleway CLI](/developer-tools/scaleway-cli/quickstart/)

## Deploying your first function with Serverless Framework

### Serverless Framework Service

A service, which acts as a project, is the Framework's unit of organization. You can create a service using the `serverless create` as explained in the [following section](#deploying-a-function).

A service is configured via a `serverless.yml` file where you define your functions, the events that trigger them, and the resources to deploy.

Below is an example of minimal Service using the Scaleway plugin:

<Concept opened>
  #### Scaleway Service configuration
  ```yaml
  # The name of your namespace
  service: my-namespace

  # Read environment variables from a .env file
  useDotenv: false

  # Declaration of the Scaleway plugin, must not be changed
  plugins:
    - serverless-scaleway-functions

  # Scaleway-specific configuration, must not be changed
  provider:
    name: scaleway

    # Default runtime used for functions (unless overridden)
    runtime: python310

    # Global environment variables, used in every function in this namespace
    env:
      MY_VAR: "some var"
      MY_OTHER_VAR: "some other var"

    # Global secrets, used in every function in this namespace
    secret:
      MY_SECRET: "some secret"
      MY_OTHER_SECRET: "some other secret"

    # Optional override of Scaleway credentials
    scwToken: <scw-token>
    scwProject: <scw-project-id>

    # Scaleway region for the deploy
    scwRegion: fr-par

  # Include/exclude directories
  package:
    patterns:
      - "!node_modules/**"
      - "!.gitignore"
      - "!.git/**"
  ```
</Concept>

### Deploying a function

The `serverless create` command allows you to quickly create a new service in the current directory based on a provided template. Scaleway provides a [selection of custom templates](https://github.com/scaleway/serverless-scaleway-functions/tree/master/examples) for every supported language.

1. In a terminal, run the following command to create a new service based on the desired language in the folder specified with the `--path` argument, and access the folder:

    <Tabs id="templates">
      <TabsTab label="Python">
        ```
        serverless create \
        --path python3-function \
        --template-url https://github.com/scaleway/serverless-scaleway-functions/tree/master/examples/python3 \
        && cd python3-function
        ```
      </TabsTab>

      <TabsTab label="Node">
        ```
        serverless create \
        --path nodejs-function \
        --template-url https://github.com/scaleway/serverless-scaleway-functions/tree/master/examples/nodejs \
        && cd nodejs-function
        ```
      </TabsTab>
      
      <TabsTab label="PHP">
          ```
        serverless create \
        --path php-function \ 
        --template-url https://github.com/scaleway/serverless-scaleway-functions/tree/master/examples/php \
        && cd php-function
        ```
      </TabsTab>

      <TabsTab label="Go">
        ```
        serverless create \
        --path go-function \
        --template-url https://github.com/scaleway/serverless-scaleway-functions/tree/master/examples/go \
        && cd go-function
        ```
      </TabsTab>

      <TabsTab label="Rust">
        ```
        serverless create \
        --path rust-function \
        --template-url https://github.com/scaleway/serverless-scaleway-functions/tree/master/examples/rust \
        && cd rust-function
        ```
      </TabsTab>
    </Tabs>

2. Run the following command to install the required dependencies:

    ```bash
    npm i
    ```

3. Run the following command to deploy your function:

    ```sh
    serverless deploy
    ```
    <Message type="note">
    The initial deployment of your function can take up to a few minutes.
    </Message>

4. Run the following command to invoke your function:

    ```
    serverless invoke --function first
    ```

    <Message type="note">
      This command calls the function defined as **first** in the **functions** section of the **serverless.yml** file.
    </Message>

    Your function is now deployed and ready to be used. You can see the resource you just created in the [Scaleway console](https://console.scaleway.com/functions/namespaces).

## Managing functions with Serverless Framework

The Serverless framework allows you to create and manage your functions and resources declaratively, by adding them to your `serverless.yml` service file.

### Adding functions to your service

1. Open the previously created `serverless.yml` file in a code editor.

2. Add the following code to the `functions` section:

    ```yaml
    second:
      handler: handler2.handle
    ```

    Your service file should now look like the following:

    <Concept opened>

      #### Service configuration file

      ```yaml
      service: python3-function
      configValidationMode: off
      provider:
        name: scaleway
        runtime: python310
        env:
          test: test

      plugins:
        - serverless-scaleway-functions

      package:
        patterns:
          - "!node_modules/**"
          - "!.gitignore"
          - "!.git/**"

      functions:
        first:
          handler: handler.handle
          env:
            local: local
        second:
          handler: handler2.handle
      ```
    </Concept>

3. Create a `handler2.py` in the same folder as your service file, and copy the following code inside:

    ```py
    def handle(event, context):
    return {
        "body": "Hello again From Python3 runtime on Serverless Framework and Scaleway Functions",
        "headers": {
            "Content-Type": ["text/plain"],
        }
    }
    ```

4. Run the command below to deploy your deploy your new function and update the existing one:

    ```sh
    serverless deploy
    ```

5. Run the following command to invoke the function you just created:

    ```
    serverless invoke --function second
    ```

    Your second function is now deployed and ready to be used. You can see the resource you just created in the [Scaleway console](https://console.scaleway.com/functions/namespaces).

### configuring your functions

You can configure your functions by adding the options below to the `serverless.yml` file:

<Concept opened>
  #### Functions configuration
  ```yaml
  functions:
    my-func:
      # Handler entrypoint
      handler: handler.py

      # Minimum and maximum number of instances
      minScale: 0
      maxScale: 10

      # Memory limit (in MiB)
      # Limits: https://www.scaleway.com/en/docs/serverless/functions/reference-content/functions-limitations/
      memoryLimit: 1024

      # Maximum duration a request will wait to be served before it times out (in seconds)
      # Value in string format ex: "300s" (default: 300 seconds)
      timeout: 300s

      # Runtime for this function, allows overriding provider.runtime
      runtime: node20

      # How to handle HTTP. Options: enabled (allow HTTP), disabled (block HTTP), or redirected (redirect HTTP -> HTTPS)
      httpOption: enabled

      # Controls privacy of the function. Options: public (no authentication), private (token-based authentication)
      privacy: public

      # Local environment variables, used only in this function
      env:
        LOCAL_VAR: "local var"

      # Local secrets, used only in this function
      secret:
        LOCAL_SECRET: "local secret"

      # Custom domains configured for the function
      # https://www.scaleway.com/en/docs/compute/functions/how-to/add-a-custom-domain-name-to-a-function/
      custom_domains:
        - my-func.some.domain.com

      # List of events to trigger the function
      events:
        - schedule:
            rate: "1 * * * *"
            # Data passed as input in the request
            input:
              key-a: "value-a"
              key-b: "value-b"
  ```
</Concept>

## Packaging dependencies

## Language-specific considerations