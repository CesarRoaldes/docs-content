---
meta:
  title: Combining IAM and bucket policies to set up granular access to Object Storage
  description: This page explains how to combine IAM and bucket policies to manage granular access and action permissions for Object Storage resources.
content:
  h1: Combining IAM and bucket policies to set up granular access to Object Storage
  paragraph: This page explains how to combine IAM and bucket policies to manage granular access and action permissions for Object Storage resources.
tags: object storage command bucket s3 iam permissions acl policy
dates:
  validation: 2023-06-15
  posted: 2023-01-17
---

Scaleway Object Storage allows you to manage access to your resources with two features, [Identity and Access Management (IAM)](/identity-and-access-management/iam/concepts/#iam) and [Bucket policies](/storage/object/api-cli/bucket-policy/).

You can use IAM when you do not need to configure access to specific buckets, and favor simplicity over granularity. IAM is central, and policy-based: it says who can do what in the entire Scaleway ecosystem. For example, if access to resources at the Project level is enough for your Object Storage use cases, use IAM only.

Bucket policies operate at the bucket level, and enable you to state clearly who can do what in each bucket.

To configure more granular access to your Object Storage buckets, you can combine both IAM and bucket policies. For example, if you must restrict access to specific actions you can perform on a bucket, or if you need the bucket to be available only to certain users, you can use a combination of IAM and bucket policies.


## Bucket policies and IAM overview

### Bucket policies

<Macro id="storage-bucket-policy" />

### IAM

[Identity and Access Management (IAM)](/identity-and-access-management/iam/concepts/#iam) allows you to control and manage access to your resources. For users of Scaleway Object Storage, this means that besides configuring access via bucket policies, you can use IAM policies to configure permissions.

An [IAM policy](/identity-and-access-management/iam/concepts/#policy) is used to define the permissions of users, groups and applications in a given Organization. A policy is composed of a [principal](/identity-and-access-management/iam/concepts/#principal) (the user, group or application to which it applies) and one or more IAM rules (which describe the permission sets the principal should have, and the scope of those permission sets).

## Combining IAM and bucket policies

<Lightbox src="scaleway-bucket-policy-iam-table.webp" alt="" />>

In order to perform actions on a bucket, a principal (user or application) must be granted access via an IAM policy, and optionally via a bucket policy.

For example, if a user wants to list the objects in a bucket, they must ensure that:

    - the IAM policy explicitly allows the user to list Objects (for example, with an `ObjectStorageReadOnly` or a `ObjectStorageObjectRead` permission set specified in the policy)
    - if there is no existing bucket policy, the action allowed by IAM is enough to grant them list accesss
    - if there is a bucket policy, the list action is **not explicitly denied** in the policy

<Message type="important">
  When using bucket and IAM policies concurrently, keep in mind that:
    - Even if you only want to define the permissions available for bucket policies, you must first define IAM policy permissions. This is a necessary step of the process.
    - When you create a Scaleway API key with IAM, you are prompted to specify the API keyâ€™s [preferred Project for Object Storage](/identity-and-access-management/iam/api-cli/using-api-key-object-storage/). This API key will always use this Project when carrying out Object Storage actions via any API/CLI.
    - The [preferred Project](/identity-and-access-management/iam/api-cli/using-api-key-object-storage/) must always be the one of the bucket where you wish to perform an action.
</Message>

## IAM and bucket policy example

Consider an Organization in which a user and an application must perform specific tasks with Scaleway Object Storage in a [project](/console/my-project/concepts/#project) named `S3-project`.

We want: 

- The user to be able to read ([GET](/storage/object/api-cli/object-operations/#getobject)) and write ([PUT](/storage/object/api-cli/object-operations/#putobject)) objects in a bucket A

- The application to be able to read ([GET](/storage/object/api-cli/object-operations/#getobject)) objects in bucket A, and to be able to write and delete objects in a bucket B

We must:

- [Create a group](/identity-and-access-management/iam/how-to/create-group/) named `S3-group` that contains the user and the application.

- [Create an IAM policy](/identity-and-access-management/iam/how-to/create-policy/) named `S3-policy` with the previously created group as a [principal](identity-and-access-management/iam/concepts/#principal). The members of this group will have the `ObjectStorageFullAccess` right.
        ```json
        {
        "name": "S3-policy",
        "description": "This policy grants full access to Object Storage resources in S3-Project to S3-group",
        "organization_id": "example-orga-4d35-81df-11532f025b28",
        "rules": [
            {
            "permission_set_names": [
                "ObjectStorageFullAccess"
            ],
            "project_ids": [
                "my-project-id-4c04-9e03-f48147eee1f1"
            ]
            }
        ],
        "group_id": "example-group-4ac6-b86e-1d960b4c54cd"
        }
        ```
- [Create a bucket policy](/storage/object/api-cli/create-bucket-policy/) to manage access to bucket A.
    ```json
    {
    "Version": "2023-06-07-alpha",
        "Id": "bucket-A-policy",
        "Statement": [
            {
                "Sid": "Deny access to all except ",
                "Effect": "Deny",
                "Principal": "user",
                "Action": [
                    "s3:AbortMultipartUpload",
                    "s3:DeleteBucketWebsite",
                    "s3:DeleteObject",
                    "s3:DeleteObjectTagging",
                    "s3:DeleteObjectVersion",
                    "s3:DeleteObjectVersionTagging",
                    "s3:GetBucketTagging",
                    "s3:GetBucketVersioning",
                    "s3:GetBucketWebsite",
                    "s3:GetLifecycleConfiguration",
                    "s3:GetObjectTagging",
                    "s3:GetObjectVersion",
                    "s3:GetObjectVersionTagging",
                    "s3:ListBucket",
                    "s3:ListBucketMultipartUploads",
                    "s3:ListMultipartUploadParts",
                    "s3:PutBucketTagging",
                    "s3:PutBucketVersioning",
                    "s3:PutBucketWebsite",
                    "s3:PutLifecycleConfiguration",
                    "s3:PutObject",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging"
                ],
                "Resource": [
                    "production-bucket-1",
                    "production-bucket-1/*"
                ]
            }
        ]
    }

<Navigation title="See Also">
  <PreviousButton to="/storage/object/api-cli/create-bucket-policy">Creating and Using bucket policies</PreviousButton>
  <NextButton to="/storage/object/api-cli/object-lock/">Setting up object lock</NextButton>
</Navigation>